<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.0.xsd">
	<changeSet id="GNUOB test objecten version 0.0.2-SNAPSHOT" author="Bernard Arjan Draaisma" context="test" runOnChange="true">
		<sql>SET FOREIGN_KEY_CHECKS = 0;</sql>
		<loadData tableName="gnuob_permissions" file="src/main/resources/liquibase/GNUOB_PERMISSIONS.csv">
			<column name="ID" type="NUMERIC" />
			<column name="VERSION" type="NUMERIC" />
			<column name="OWNER" type="STRING" />
			<column name="GROUP" type="STRING" />
			<column name="OTHERS" type="STRING" />
		</loadData>
		<loadData tableName="gnuob_access" file="src/main/resources/liquibase/GNUOB_ACCESS.csv">
			<column name="ID" type="NUMERIC" />
			<column name="VERSION" type="NUMERIC" />
			<column name="ACTIVE" type="BOOLEAN" />
			<column name="group_ID" type="NUMERIC" />
			<column name="permission_ID" type="NUMERIC" />
			<column name="site_ID" type="NUMERIC" />
			<column name="owner_ID" type="NUMERIC" />
		</loadData>
		<loadData tableName="gnuob_users" file="src/main/resources/liquibase/GNUOB_USERS.csv">
			<column name="ID" type="NUMERIC" />
			<column name="DESCRIPTION" type="STRING" />
			<column name="NAME" type="STRING" />
			<column name="PASSWORD" type="STRING" />
			<column name="ACCESS" type="STRING" />
			<column name="ROOT" type="BOOLEAN" />
		</loadData>
		<loadData tableName="gnuob_groups" file="src/main/resources/liquibase/GNUOB_GROUPS.csv">
			<column name="ID" type="NUMERIC" />
			<column name="DESCRIPTION" type="STRING" />
			<column name="NAME" type="STRING" />
			<column name="RULE" type="STRING" />
		</loadData>
		<loadData tableName="gnuob_sites" file="src/main/resources/liquibase/GNUOB_SITES.csv">
			<column name="ID" type="NUMERIC" />
			<column name="DESCRIPTION" type="STRING" />
			<column name="NAME" type="STRING" />
		</loadData>
		<loadData tableName="gnuob_categories" file="src/main/resources/liquibase/GNUOB_CATEGORIES.csv">
			<column name="ID" type="NUMERIC" />
			<column name="DESCRIPTION" type="STRING" />
			<column name="NAME" type="STRING" />
		</loadData>
		<loadData tableName="gnuob_users_gnuob_sites" file="src/main/resources/liquibase/GNUOB_USERS_GNUOB_SITES.csv">
			<column name="sites_ID" type="NUMERIC" />
			<column name="GNUOB_USERS_ID" type="NUMERIC" />
		</loadData>
		<loadData tableName="gnuob_users_gnuob_groups" file="src/main/resources/liquibase/GNUOB_USERS_GNUOB_GROUPS.csv">
			<column name="groups_ID" type="NUMERIC" />
			<column name="GNUOB_USERS_ID" type="NUMERIC" />
		</loadData>
		<loadData tableName="gnuob_settings" file="src/main/resources/liquibase/GNUOB_SETTINGS.csv">
			<column name="ID" type="NUMERIC" />
			<column name="DESCRIPTION" type="STRING" />
			<column name="VALUE" type="STRING" />
			<column name="PROPERTY" type="STRING" />
		</loadData>
		<loadData tableName="GNUOB_CONTENTS" file="src/main/resources/liquibase/GNUOB_CONTENTS.csv">
			<column name="ID" type="NUMERIC" />
			<column name="CONTENT" type="STRING" />
			<column name="FORMAT" type="STRING" />
			<column name="NAME" type="STRING" />
			<column name="POSITION" type="NUMERIC" />
		</loadData>
		<loadData tableName="GNUOB_CATEGORIES_GNUOB_CONTENTS" file="src/main/resources/liquibase/GNUOB_CATEGORIES_GNUOB_CONTENTS.csv">
			<column name="contents_ID" type="NUMERIC" />
			<column name="GNUOB_CATEGORIES_ID" type="NUMERIC" />
		</loadData>
		<loadData tableName="GNUOB_SUB_CATEGORIES" file="src/main/resources/liquibase/GNUOB_SUB_CATEGORIES.csv">
			<column name="ID" type="NUMERIC" />
			<column name="VERSION" type="NUMERIC" />
			<column name="NAME" type="STRING" />
			<column name="DESCRIPTION" type="STRING" />
			<column name="POSITION" type="NUMERIC" />
		</loadData>
		<loadData tableName="GNUOB_CATEGORIES_GNUOB_SUB_CATEGORIES" file="src/main/resources/liquibase/GNUOB_CATEGORIES_GNUOB_SUB_CATEGORIES.csv">
			<column name="subCategories_ID" type="NUMERIC" />
			<column name="GNUOB_CATEGORIES_ID" type="NUMERIC" />
		</loadData>
		<loadData tableName="GNUOB_SUB_CATEGORIES_GNUOB_SUB_CATEGORIES" file="src/main/resources/liquibase/GNUOB_SUB_CATEGORIES_GNUOB_SUB_CATEGORIES.csv">
			<column name="subCategories_ID" type="NUMERIC" />
			<column name="GNUOB_SUB_CATEGORIES_ID" type="NUMERIC" />
		</loadData>
		<loadData tableName="GNUOB_SUB_CATEGORIES_GNUOB_CONTENTS" file="src/main/resources/liquibase/GNUOB_SUB_CATEGORIES_GNUOB_CONTENTS.csv">
			<column name="contents_ID" type="NUMERIC" />
			<column name="GNUOB_SUB_CATEGORIES_ID" type="NUMERIC" />
		</loadData>
		<loadData tableName="GNUOB_PRODUCTS" file="src/main/resources/liquibase/GNUOB_PRODUCTS.csv">
			<column name="AMOUNT" type="NUMERIC" />
			<column name="BESTSELLERS" type="NUMERIC" />
			<column name="DESCRIPTION" type="STRING" />
			<column name="DISCOUNT" type="NUMERIC" />
			<column name="ITEM_HEIGHT" type="NUMERIC" />
			<column name="ITEM_HEIGHT_UNIT" type="STRING" />
			<column name="ITEM_LENGTH" type="NUMERIC" />
			<column name="ITEM_LENGTH_UNIT" type="STRING" />
			<column name="ITEM_URL" type="STRING" />
			<column name="ITEM_WEIGHT" type="NUMERIC" />
			<column name="ITEM_WEIGHT_UNIT" type="STRING" />
			<column name="ITEM_WIDTH" type="NUMERIC" />
			<column name="ITEM_WIDTH_UNIT" type="STRING" />
			<column name="LATEST_COLLECTION" type="NUMERIC" />
			<column name="NAME" type="STRING" />
			<column name="NUMBER" type="STRING" />
			<column name="RATING" type="NUMERIC" />
			<column name="RECOMMENDED" type="NUMERIC" />
			<column name="SHIPPING_COST" type="NUMERIC" />
			<column name="TAX" type="NUMERIC" />
			<column name="ID" type="NUMERIC" />
			<column name="stock_ID" type="NUMERIC" />
		</loadData>
		<loadData tableName="GNUOB_STOCKS" file="src/main/resources/liquibase/GNUOB_STOCKS.csv">
			<column name="ID" type="NUMERIC" />
			<column name="VERSION" type="NUMERIC" />
			<column name="MAX_QUANTITY" type="NUMERIC" />
			<column name="MIN_QUANTITY" type="NUMERIC" />
			<column name="QUANTITY" type="NUMERIC" />
		</loadData>
		<loadData tableName="GNUOB_PRODUCTS_GNUOB_CONTENTS" file="src/main/resources/liquibase/GNUOB_PRODUCTS_GNUOB_CONTENTS.csv">
			<column name="GNUOB_PRODUCTS_ID" type="NUMERIC" />
			<column name="contents_ID" type="NUMERIC" />
		</loadData>
		<loadData tableName="GNUOB_PRODUCTS_GNUOB_SUB_CATEGORIES" file="src/main/resources/liquibase/GNUOB_PRODUCTS_GNUOB_SUB_CATEGORIES.csv">
			<column name="GNUOB_PRODUCTS_ID" type="NUMERIC" />
			<column name="subCategories_ID" type="NUMERIC" />
		</loadData>
		<sql>SET FOREIGN_KEY_CHECKS = 1;</sql>
		<rollback>
			<sql>SET FOREIGN_KEY_CHECKS = 0;</sql>
			<delete tableName="GNUOB_ACCESS" />
			<delete tableName="GNUOB_ADDRESSES" />
			<delete tableName="GNUOB_CATEGORIES" />
			<delete tableName="GNUOB_CATEGORIES_GNUOB_CONTENTS" />
			<delete tableName="GNUOB_CATEGORIES_GNUOB_SUB_CATEGORIES" />
			<delete tableName="GNUOB_CONTENTS" />
			<delete tableName="GNUOB_CONTRACTS" />
			<delete tableName="GNUOB_CUSTOMERS" />
			<delete tableName="GNUOB_GROUPS" />
			<delete tableName="GNUOB_INVOICES" />
			<delete tableName="GNUOB_INVOICES_GNUOB_PAYMENTS" />
			<delete tableName="GNUOB_OFFER_RECORDS" />
			<delete tableName="GNUOB_OFFERS" />
			<delete tableName="GNUOB_OFFERS_GNUOB_OFFER_RECORDS" />
			<delete tableName="GNUOB_ORDER_RECORDS" />
			<delete tableName="GNUOB_ORDERS" />
			<delete tableName="GNUOB_ORDERS_GNUOB_ORDER_RECORDS" />
			<delete tableName="GNUOB_PAYMENTS" />
			<delete tableName="GNUOB_PERMISSIONS" />
			<delete tableName="GNUOB_PRODUCTS" />
			<delete tableName="GNUOB_PRODUCTS_GNUOB_CONTENTS" />
			<delete tableName="GNUOB_PRODUCTS_GNUOB_SUB_CATEGORIES" />
			<delete tableName="GNUOB_SETTINGS" />
			<delete tableName="GNUOB_SHIPMENTS" />
			<delete tableName="GNUOB_SITES" />
			<delete tableName="GNUOB_STOCKS" />
			<delete tableName="GNUOB_SUB_CATEGORIES" />
			<delete tableName="GNUOB_SUB_CATEGORIES_GNUOB_CONTENTS" />
			<delete tableName="GNUOB_SUB_CATEGORIES_GNUOB_SUB_CATEGORIES" />
			<delete tableName="GNUOB_USERS" />
			<delete tableName="GNUOB_USERS_GNUOB_GROUPS" />
			<delete tableName="GNUOB_USERS_GNUOB_SITES" />
			<sql>SET FOREIGN_KEY_CHECKS = 1;</sql>
		</rollback>
	</changeSet>
	<changeSet author="Bernard Arjan Draaisma" id="1415447276727-61">
		<addUniqueConstraint columnNames="CONTRACT_ID" constraintName="UK_CONTRACT_ID" deferrable="false" disabled="false" initiallyDeferred="false" tableName="gnuob_contracts" />
		<rollback>
			<dropUniqueConstraint tableName="gnuob_contracts" constraintName="UK_CONTRACT_ID" />
		</rollback>
	</changeSet>
	<changeSet id="Adding MAX_TOTAL column for orders" author="Bernard Arjan Draaisma">
		<addColumn tableName="gnuob_orders">
			<column name="MAX_TOTAL" type="DECIMAL(19, 2)" />
		</addColumn>
		<rollback>
			<dropColumn tableName="gnuob_orders" columnName="MAX_TOTAL" />
		</rollback>
	</changeSet>
	<changeSet id="Increase COUNTRY column for gnuob_addresses" author="Bernard Arjan Draaisma">
		<modifyDataType tableName="gnuob_addresses" columnName="COUNTRY" newDataType="VARCHAR(20)" />
		<rollback>
			<modifyDataType tableName="gnuob_addresses" columnName="COUNTRY" newDataType="VARCHAR(2)" />
		</rollback>
	</changeSet>
	<changeSet id="Add GNUOB_OPTIONS table" author="Bernard Arjan Draaisma">
		<createTable tableName="GNUOB_OPTIONS">
			<column autoIncrement="true" name="ID" type="BIGINT(19)">
				<constraints primaryKey="true" />
			</column>
			<column name="CREATION" type="datetime" />
			<column name="MODIFICATION" type="datetime" />
			<column name="VERSION" type="INT(10)" />
			<column name="VALUE" type="VARCHAR(128)">
				<constraints nullable="false" />
			</column>
			<column name="DESCRIPTION" type="VARCHAR(128)" />
			<column name="DISABLED" type="BIT(1)" />
			<column name="POSITION" type="INT(10)" />
		</createTable>
		<rollback>
			<dropTable tableName="GNUOB_OPTIONS" />
		</rollback>
	</changeSet>
	<changeSet id="Add gnuob_products_gnuob_options table" author="Bernard Arjan Draaisma">
		<createTable tableName="gnuob_products_gnuob_options">
			<column name="GNUOB_PRODUCTS_ID" type="BIGINT(19)">
				<constraints nullable="false" />
			</column>
			<column name="options_ID" type="BIGINT(19)">
				<constraints nullable="false" />
			</column>
		</createTable>
		<rollback>
			<dropTable tableName="gnuob_products_gnuob_options" />
		</rollback>
	</changeSet>
	<changeSet author="Bernard Arjan Draaisma" id="gnuob_products_gnuob_options_primary">
		<addPrimaryKey columnNames="GNUOB_PRODUCTS_ID, options_ID" constraintName="PRIMARY" tableName="gnuob_products_gnuob_options" />
		<rollback>
			<dropPrimaryKey tableName="gnuob_products_gnuob_options" />
		</rollback>
	</changeSet>
	<changeSet author="Bernard Arjan Draaisma" id="UK options_ID for gnuob_products_gnuob_options">
		<addUniqueConstraint columnNames="options_ID" constraintName="UK_gnuob_products_gnuob_options" deferrable="false" disabled="false" initiallyDeferred="false" tableName="gnuob_products_gnuob_options" />
		<rollback>
			<dropUniqueConstraint tableName="gnuob_products_gnuob_options" constraintName="UK_gnuob_products_gnuob_options" />
		</rollback>
	</changeSet>
	<changeSet author="Bernard Arjan Draaisma" id="FK options_ID for gnuob_options">
		<addForeignKeyConstraint baseColumnNames="options_ID" baseTableName="gnuob_products_gnuob_options" constraintName="FK_gnuob_options_id_gnuob_options" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="ID" referencedTableName="gnuob_options" />
		<rollback>
			<dropForeignKeyConstraint baseTableName="gnuob_products_gnuob_options" constraintName="FK_gnuob_options_id_gnuob_options" />
		</rollback>
	</changeSet>
	<changeSet author="Bernard Arjan Draaisma" id="FK GNUOB_PRODUCTS_ID for gnuob_products">
		<addForeignKeyConstraint baseColumnNames="GNUOB_PRODUCTS_ID" baseTableName="gnuob_products_gnuob_options" constraintName="FK_gnuob_products_id_gnuob_products" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="ID" referencedTableName="gnuob_products" />
		<rollback>
			<dropForeignKeyConstraint baseTableName="gnuob_products_gnuob_options" constraintName="FK_gnuob_products_id_gnuob_products" />
		</rollback>
	</changeSet>
	<changeSet author="Bernard Arjan Draaisma" id="add options to order records">
		<addColumn tableName="GNUOB_ORDER_RECORDS">
			<column name="OPTION" type="VARCHAR(128)" />
		</addColumn>
		<rollback>
			<dropColumn tableName="GNUOB_ORDER_RECORDS" columnName="OPTION" />
		</rollback>
	</changeSet>
	<changeSet author="Bernard Arjan Draaisma" id="add options to offer records">
		<addColumn tableName="GNUOB_OFFER_RECORDS">
			<column name="OPTION" type="VARCHAR(128)" />
		</addColumn>
		<rollback>
			<dropColumn tableName="GNUOB_OFFER_RECORDS" columnName="OPTION" />
		</rollback>
	</changeSet>
	<changeSet id="GNUOB extra test objecten version 0.0.2-SNAPSHOT" author="Bernard Arjan Draaisma" context="test" runOnChange="true">
		<sql>SET FOREIGN_KEY_CHECKS = 0;</sql>
		<loadData tableName="GNUOB_OPTIONS" file="src/main/resources/liquibase/GNUOB_OPTIONS.csv">
			<column name="ID" type="NUMERIC" />
			<column name="VERSION" type="NUMERIC" />
			<column name="VALUE" type="STRING" />
			<column name="DESCRIPTION" type="STRING" />
			<column name="DISABLED" type="BOOLEAN" />
			<column name="POSITION" type="NUMERIC" />
		</loadData>
		<loadData tableName="GNUOB_PRODUCTS_GNUOB_OPTIONS" file="src/main/resources/liquibase/GNUOB_PRODUCTS_GNUOB_OPTIONS.csv">
			<column name="GNUOB_PRODUCTS_ID" type="NUMERIC" />
			<column name="options_ID" type="NUMERIC" />
		</loadData>
		<sql>SET FOREIGN_KEY_CHECKS = 1;</sql>
		<rollback>
			<sql>SET FOREIGN_KEY_CHECKS = 0;</sql>
			<delete tableName="GNUOB_OPTIONS" />
			<delete tableName="GNUOB_PRODUCTS_GNUOB_OPTIONS" />
			<sql>SET FOREIGN_KEY_CHECKS = 1;</sql>
		</rollback>
	</changeSet>
	<changeSet id="Adding position column for list sorting" author="Bernard Arjan Draaisma">
		<addColumn tableName="gnuob_order_records">
			<column name="POSITION" type="INT(10)" />
		</addColumn>
		<addColumn tableName="gnuob_offer_records">
			<column name="POSITION" type="INT(10)" />
		</addColumn>
		<addColumn tableName="gnuob_payments">
			<column name="POSITION" type="INT(10)" />
		</addColumn>
		<rollback>
			<dropColumn tableName="gnuob_payments" columnName="POSITION" />
			<dropColumn tableName="gnuob_offer_records" columnName="POSITION" />
			<dropColumn tableName="gnuob_order_records" columnName="POSITION" />
		</rollback>
	</changeSet>
	<changeSet id="Adding MAX_TOTAL column for offers" author="Bernard Arjan Draaisma">
		<addColumn tableName="gnuob_offers">
			<column name="MAX_TOTAL" type="DECIMAL(19, 2)" />
		</addColumn>
		<rollback>
			<dropColumn tableName="gnuob_offers" columnName="MAX_TOTAL" />
		</rollback>
	</changeSet>
</databaseChangeLog>


